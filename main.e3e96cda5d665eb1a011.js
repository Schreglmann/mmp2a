!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=20)}([function(e,t,n){e.exports=n.p+"images/logo.svg"},function(e,t,n){e.exports=n.p+"images/help.svg"},function(e,t,n){e.exports=n.p+"images/main_button.svg"},function(e,t,n){e.exports=n.p+"images/facebook.svg"},function(e,t,n){e.exports=n.p+"images/twitter.svg"},function(e,t,n){e.exports=n.p+"images/dots.svg"},function(e,t,n){e.exports=n.p+"images/spotify.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var o=Object.keys;function l(e){return"string"==typeof e}function i(e){return"object"==typeof e?null!==e:a(e)}function a(e){return"function"==typeof e}function s(e){return Array.isArray(e)?e.map(s).filter(Boolean).join(" "):i(e)?o(e).filter(function(t){return e[t]}).join(" "):function(e){return!function(e){return"boolean"==typeof e}(e)&&null!=e}(e)?""+e:""}function u(e,t){for(var n,s=[],u=2;u<arguments.length;u++)s[u-2]=arguments[u];return t=t||{},l(e)?(function(e,t){for(var n=0,r=o(e);n<r.length;n++){var l=r[n];p(l,e[l],t)}}(t,n=t.namespaceURI?document.createElementNS(t.namespaceURI,e):document.createElement(e)),f(s,n)):a(e)&&(n=e(r({},t,{children:s}))),!function(e){return i(e)&&"current"in e}(t.ref)?a(t.ref)&&t.ref(n):t.ref.current=n,n}function c(e,t){!function(e){return i(e)&&"number"==typeof e.length&&"number"!=typeof e.nodeType}(e)?l(e)||function(e){return"number"==typeof e}(e)?t.appendChild(document.createTextNode(e)):null===e?t.appendChild(document.createComment("")):function(e){return e&&"number"==typeof e.nodeType}(e)&&t.appendChild(e):f(e,t)}function f(e,t){for(var n=0,r=e;n<r.length;n++){c(r[n],t)}return t}function p(e,t,n){switch(e){case"dataset":for(var l=0,u=o(t||{});l<u.length;l++){var c=u[l],f=t[c];null!=f&&(n.dataset[c]=f)}return;case"innerHTML":case"innerText":case"textContent":return void(n[e]=t);case"spellCheck":return void(n.spellcheck=t);case"class":case"className":return void n.setAttribute("class",s(t));case"ref":case"namespaceURI":return;case"style":if(i(t))return void r(n.style,t)}a(t)?"o"===e[0]&&"n"===e[1]&&function(e,t,n){e.addEventListener(t,n)}(n,e.slice(2).toLowerCase(),t):!0===t?n.setAttribute(e,""):!1!==t&&null!=t&&n.setAttribute(e,t)}n(7),n(8);var d=n(0),m=n.n(d),g=n(1),b=n.n(g);function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h,v,O=function(e){e.preventDefault(),history.pushState({},"",e.currentTarget.href)},w=function(e){var t=e.children,n=y(e,["children"]);return u("a",{href:n.to,className:n.className,onClick:O},t)},S=!1,j=function(){event.preventDefault,document.querySelector("main").classList.toggle("footer_visible"),S=!S},k=function(){return u("header",null,u("div",null),u("h1",null,u(w,{to:"/"},u("img",{className:"main-logo",src:m.a,alt:"Musicr"}))),u("button",{className:"button",onClick:j},u("img",{src:b.a,alt:"Help"})," Help"))},x=(n(9),n(2)),P=n.n(x),I=function(){return u("button",{className:"main-button",onClick:U},u("img",{src:P.a,alt:"Click to start"}),u("div",{className:"horizontal-line"}),u("p",null,"listen"))},N=function(e){return new Promise(function(t){var n=e.data,r=new FormData;r.append("file",n),$.ajax({url:"https://musicr.schreglmann.at/api.php",dataType:"json",cache:!1,contentType:!1,processData:!1,data:r,type:"post",success:function(e){console.log("success"),_(e).then(function(e){t(e)})},error:function(){console.log("Something went wrong")}})})},_=function(e){return new Promise(function(t){var n={title:null,artist:null,album:null,spotify:null,youtubeid:null,genre:null,youtube:null,lyrics:null};try{n.title=e.metadata.music[0].title}catch(e){n[0]=null}try{n.artist=e.metadata.music[0].artists[0].name}catch(e){n[1]=null}try{n.album=e.metadata.music[0].album.name}catch(e){n[2]=null}try{n.spotify=e.metadata.music[0].external_metadata.spotify.track.id}catch(e){n[3]=null}try{n.youtubeid=e.metadata.music[0].external_metadata.youtube.vid}catch(e){n[4]=null}try{n.genre=e.metadata.music[0].genres[0].name}catch(e){n[5]=null}null==n.youtubeid?n.youtube=null:n.youtube="https://www.youtube.com/watch?v=".concat(n.youtubeid),C(n.youtubeid).then(function(e){n.lyrics=e}).catch(function(){n.lyrics=null}).finally(function(){t(n)})})},C=function(e){return new Promise(function(t){$.ajax({url:"https://musicdemons.com/api/v1/song/by-youtube-id/".concat(e,"/lyrics"),dataType:"text",type:"get",success:function(e){t(e)},error:function(){console.log("No Lyrics available"),t(null)}})})},T=!1,M=function(){document.querySelector("body").classList.add("listening"),v=setTimeout(function(){document.querySelector("#spinner").classList.add("spinner")},1e4)},U=function(){T||(T=!0,new Promise(function(e){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,document.querySelector(".main-button"),navigator.getUserMedia?(console.log("getUserMedia supported."),navigator.getUserMedia({audio:!0},function(t){var n=new MediaRecorder(t);M(),n.start(),console.log(n.state),h=setTimeout(function(){n.stop()},1e4),n.ondataavailable=function(t){console.log("data available"),N(t).then(function(t){e(t)})}},function(e){console.log("The following gUM error occured: "+e)})):console.log("getUserMedia not supported on your browser!")}).then(function(e){document.querySelector("body").classList.remove("listening"),T=!1,null!=e.title?(localStorage.setItem("currentSong",JSON.stringify(e)),history.pushState({},"","/song")):history.pushState({},"","/notfound")}))},E=function(){document.querySelector("body").classList.remove("listening"),clearTimeout(v),clearTimeout(h),T=!1},L=function(){return u("section",{className:"background fullscreen main-screen"},u(I,null),u("a",{href:"#song_history",className:"bottom-notice"},"previously listened"),u("button",{className:"cancel_button",onClick:E},"cancel"),u("div",{class:"",id:"spinner"},u("div",null),u("div",null),u("div",null)),u("div",{id:"waves"}))},A=(n(10),n(11),n(3)),G=n.n(A),q=n(4),z=n.n(q),R=n(5),D=n.n(R);n(12);function H(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var J=function(e){e.currentTarget.classList.toggle("social_media_visible")},F=function(e){e.children;var t=H(e,["children"]),n="",r="",o="https://open.spotify.com/track/".concat(t.sid),l="I just listened to ".concat(t.title," by ").concat(t.artist," on musicr.");return r="https://www.facebook.com/sharer/sharer.php?u=",n="https://twitter.com/intent/tweet?text=",n+=encodeURIComponent(l),r+=encodeURIComponent(o),u("div",{class:"social_media",onClick:J},u("button",{"aria-label":"Open Social Media Field"},u("img",{src:D.a,alt:"Open Button"})),u("ul",null,u("li",null,u("a",{href:n,target:"_blank",rel:"noopener noreferrer"},u("img",{src:z.a,alt:"Twitter"}))),u("li",null,u("a",{href:r,target:"_blank",rel:"noopener noreferrer"},u("img",{src:G.a,alt:"Facebook"})))))},B=n(6),W=n.n(B);n(13);function Y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var K=function(e){e.children;return u("a",{href:"https://open.spotify.com/track/"+Y(e,["children"]).sid,class:"spotify_btn",target:"_blank",rel:"noopener noreferrer"},u("img",{src:W.a,alt:"Spotify"}),u("p",null,"Open"))};function Q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var V=function(e){e.children;var t,n=Q(e,["children"]);n.sid&&(t=u(K,{sid:n.sid}));var r="/song?idx=".concat(n.idx);return u("li",{className:"mediabox"},u(w,{to:r},u("img",{src:"https://placehold.it/500",alt:"Lorempixel"})),u("div",null,u("h3",null,n.title),u("h4",{className:"artist"},n.artist),u("h4",{className:"album"},n.album),t,u(F,{artist:n.artist,title:n.title,sid:n.sid}),u(w,{to:r,className:"more_btn"},"Show me more")))};function X(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Z=function(e){e.children,X(e,["children"]);var t=localStorage.getItem("history"),n=[];if(t=JSON.parse(t))for(var r=0;r<t.length;r++){var o=t[r];n.push(u(V,{title:o.title,artist:o.artist,album:o.album,sid:o.spotify,idx:r}))}else n=u("p",null,"You haven't listened to any songs yet.");return u("section",{class:"song_history",id:"song_history"},u("h2",null,"Previously listened:"),n)};function ee(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var te=function(e){e.preventDefault,e.currentTarget.classList.remove("footer_visible")},ne=function(e){e.children,ee(e,["children"]);return u("main",{onClick:te},u(L,null),u(Z,null))},re=function(){return u("main",{class:"site background fullscreen"},u("h2",null,"Page not Found"))};n(14);function oe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var le=function(e){e.children;var t,n=oe(e,["children"]);return n.sid&&(t=u(K,{sid:n.sid})),u("section",{class:"song"},u("img",{src:"https://placehold.it/500",alt:""}),u("h2",null,n.title),u("h3",{class:"artist"},n.artist),u("h3",{class:"album"},n.album),t,u(F,{artist:n.artist,title:n.title,sid:n.sid}))};n(15);function ie(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ae=function(e){e.children;var t,n=ie(e,["children"]);return"past"==n.tense?t="were listening":"present"==n.tense?t="are listening":"future"==n.tense?t=" are going to listen":"perfect"==n.tense&&(t="have been listening"),u("section",null,u("p",{class:"song_header"},"You ",t," to",u("strong",null,u("span",{class:"nobreak"}," ",n.artist,"'s")," ",u("span",{class:"nobreak"}," ",n.title)),"."))};n(16),n(17);function se(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ue=function(e){e.children;var t=se(e,["children"]);return u("section",null,u("h2",null,"Lyrics:"),u("p",{class:"lyrics"},t.lyrics))};function ce(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var fe=function(){return location.search.substr(1).split("&").map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}})},pe=function(e){e.children,ce(e,["children"]);var t=localStorage.getItem("currentSong");t=JSON.parse(t);var n=localStorage.getItem("history");n=JSON.parse(n);var r="present";if(console.log("song = "),console.log(t),localStorage.removeItem("currentSong"),t)n||(n=[]),n.unshift(t);else{r="past",console.log("findGetParams() = "),console.log(fe());var o=fe();console.log("history = "),console.log(n),console.log("getParams[0].value = "),console.log(o[0].value),t=n[o[0].value]}console.log("song new = "),console.log(t),localStorage.setItem("history",JSON.stringify(n));var l=t&&t.lyrics?u(ue,{lyrics:t.lyrics}):null;return u("main",{className:"site fullscreen background"},u(ae,{artist:t.artist,title:t.title,tense:r}),u(le,{artist:t.artist,title:t.title,album:t.album,sid:t.spotify}),l)};n(18);function de(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var me=function(e){e.children,de(e,["children"]);return u("footer",null,u("p",null,"Musicr.io is the first* online music recognition software. It helps you find out what song your currently listening to and can even recognize you humming your favourite songs. Musicr.io equips you with all the important information including songtitle, artist, album and lyrics."),u("p",null,"Simply click the big orange button!"),u("p",null,"Musicr.io is being developed by Georg Schreglmann and Niklas Noldin at the University of Applied Sciences Salzburg."),u("p",null,u(w,{to:"/imprint",className:"underline"},"imprint"),"|",u(w,{to:"/data_protection",className:"underline"},"data protection info")),u("p",{className:"small_text"},"* It's probably not the first one, but it's cool."))},ge=(n(19),function(){return u("main",{class:"site fullscreen background"},u("section",{class:"legal"},u("h2",null,"Imprint"),u("p",null,"Information in accordance with Section 5 TMG",u("br",null),u("br",null),"Urstein-Süd 3-5",u("br",null),"520",u("br",null),"5412 Puch bei Hallein",u("br",null),u("h3",null,"Contact Information"),"Telephone: +43 664 1459315",u("br",null),"E-Mail:"," ",u("a",{href:"mailto:nnoldin.mmt-b2017@fh-salzburg.ac.at"},"nnoldin.mmt-b2017@fh-salzburg.ac.at"),u("br",null),"Internet address:"," ",u("a",{href:"www.niklasnold.in",target:"_blank"},"www.niklasnold.in"),u("br",null),u("h3",null,"Graphics and Image Sources"),"www.spotify.com",u("br",null),u("br",null),u("h3",null,"Disclaimer"),"Accountability for content",u("br",null),"The contents of our pages have been created with the utmost care. However, we cannot guarantee the contents' accuracy, completeness or topicality. According to statutory provisions, we are furthermore responsible for our own content on these web pages. In this matter, please note that we are not obliged to monitor the transmitted or saved information of third parties, or investigate circumstances pointing to illegal activity. Our obligations to remove or block the use of information under generally applicable laws remain unaffected by this as per §§ 8 to 10 of the Telemedia Act (TMG).",u("br",null),u("br",null),"Accountability for links",u("br",null),"Responsibility for the content of external links (to web pages of third parties) lies solely with the operators of the linked pages. No violations were evident to us at the time of linking. Should any legal infringement become known to us, we will remove the respective link immediately.",u("br",null),u("br",null),"Copyright",u("br",null)," Our web pages and their contents are subject to German copyright law. Unless expressly permitted by law, every form of utilizing, reproducing or processing works subject to copyright protection on our web pages requires the prior consent of the respective owner of the rights. Individual reproductions of a work are only allowed for private use. The materials from these pages are copyrighted and any unauthorized use may violate copyright laws.")))}),be=function(){return u("main",{class:"site fullscreen background"},u("section",{class:"legal"},u("h2",null,"We have the world's greatest privacy policy:"),u("p",null,"We don’t store your data, period.")))},ye=function(){return u("main",{class:"site fullscreen background"},u("h2",null,"Song not found, sorry."))},he=function(e){e=e.indexOf("?")>=0?e.substring(e.indexOf("/",7),e.indexOf("?")):e.substring(e.indexOf("/",7));var t=document.getElementById("root");switch(t.innerHTML="",t.appendChild(u(k,null)),e){case"/":t.appendChild(u(ne,null));break;case"/song":t.appendChild(u(pe,null));break;case"/imprint":t.appendChild(u(ge,null));break;case"/data_protection":t.appendChild(u(be,null));break;case"/notfound":t.appendChild(u(ye,null));break;default:t.appendChild(u(re,null))}t.appendChild(u(me,null))};window.addEventListener("popstate",function(e){he(window.location.pathname)},!1),function(e){var t=e.pushState;e.pushState=function(n,r,o){var l=t.apply(e,arguments);return"function"==typeof e.onpushstate&&e.onpushstate({state:n,title:r,path:o}),l}}(window.history),history.onpushstate=function(e){he(e.path)},he(window.location.pathname)}]);